<?php

namespace App\Controller;

use Symfony\Bundle\FrameworkBundle\Controller\AbstractController;
use Symfony\Component\HttpFoundation\JsonResponse;
use Symfony\Component\Routing\Annotation\Route;

class ApiController extends AbstractController
{
    #[Route('/api/user', name: 'api_user', methods: ['GET'])]
    public function user(): JsonResponse
    {
        return $this->json([
            'prenom' => 'Jean',
            'nom' => 'Dupont',
            'email' => 'jean.dupont@example.com',
            'dateInscription' => '2024-01-01',
            'matieres' => ['Maths', 'Physique', 'SVT'],
        ]);
    }

    #[Route('/api/stats', name: 'api_stats', methods: ['GET'])]
    public function stats(): JsonResponse
    {
        return $this->json([
            'moyenneGenerale' => 15.2,
            'tauxReussite' => 87,
            'totalQCMTermines' => 12,
            'totalQCMAfaire' => 3,
            'progressionMois' => [12, 13, 14, 15, 16, 15, 14, 15, 16, 17, 16, 15, 14, 15, 16, 17, 18, 17, 16, 15, 14, 15, 16, 17, 18, 17, 16, 15, 14, 15],
        ]);
    }

    #[Route('/api/cours', name: 'api_cours', methods: ['GET'])]
    public function cours(): JsonResponse
    {
        return $this->json([
            [
                'id' => 1,
                'titre' => 'Les fonctions',
                'matiere' => 'Maths',
                'sousCategorie' => 'Analyse',
                'nombreVideos' => 5,
                'progression' => 80,
            ],
            [
                'id' => 2,
                'titre' => 'La cellule',
                'matiere' => 'SVT',
                'sousCategorie' => 'Biologie',
                'nombreVideos' => 3,
                'progression' => 60,
            ],
        ]);
    }

    #[Route('/api/qcm', name: 'api_qcm', methods: ['GET'])]
    public function qcm(): JsonResponse
    {
        return $this->json([
            [
                'id' => 1,
                'titre' => 'QCM sur les fonctions',
                'matiere' => 'Maths',
                'sousCategorie' => 'Analyse',
                'nombreQuestions' => 10,
                'deadline' => '2024-02-10',
            ],
            [
                'id' => 2,
                'titre' => 'QCM sur la cellule',
                'matiere' => 'SVT',
                'sousCategorie' => 'Biologie',
                'nombreQuestions' => 8,
                'deadline' => '2024-02-12',
            ],
        ]);
    }

    #[Route('/api/videos', name: 'api_videos', methods: ['GET'])]
    public function videos(): JsonResponse
    {
        return $this->json([
            [
                'id' => 1,
                'titre' => 'Introduction aux fonctions',
                'matiere' => 'Maths',
                'duree' => 12,
                'nombreVues' => 120,
            ],
            [
                'id' => 2,
                'titre' => 'La cellule animale',
                'matiere' => 'SVT',
                'duree' => 15,
                'nombreVues' => 90,
            ],
        ]);
    }

    #[Route('/api/notes', name: 'api_notes', methods: ['GET'])]
    public function notes(): JsonResponse
    {
        return $this->json([
            [
                'id' => 1,
                'qcmTitre' => 'QCM sur les fonctions',
                'matiere' => 'Maths',
                'sousCategorie' => 'Analyse',
                'note' => 18,
                'pourcentage' => 90,
                'date' => '2024-01-20',
                'reponses' => [],
                'duree' => 20,
            ],
            [
                'id' => 2,
                'qcmTitre' => 'QCM sur la cellule',
                'matiere' => 'SVT',
                'sousCategorie' => 'Biologie',
                'note' => 15,
                'pourcentage' => 75,
                'date' => '2024-01-25',
                'reponses' => [],
                'duree' => 18,
            ],
        ]);
    }
}


m